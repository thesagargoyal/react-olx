import React, {useEffect, useState} from 'react';
import { View, Text, FlatList, StyleSheet, Linking, Platform } from 'react-native';
import { Avatar, Button, Card, Title, Paragraph } from 'react-native-paper';
import firebase from 'firebase';
const ListItemScreen = () => {

    const [items, setItems] = useState([]);

            // image:"data:image/jpeg;base64,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",


    const getAds = async ()=>{
        const querySnap = await firebase.firestore().collection('ads').get()
        const result=querySnap.docs.map(docSnap=>docSnap.data())
        setItems(result);
    }
    useEffect(()=>{
        getAds();
        return ()=>{
            console.log('cleanup');
        }
    }, [])

    const quickDial=(phone)=>{
        let number = '';
        if (Platform.OS === 'ios') {
        number = `telprompt:${phone}`;
        }
        else {
        number = `tel:${phone}`; 
        }
        Linking.openURL(number);
    }

    const render = (item)=>{
        return <Card style={styles.card}>
        <Card.Title title={item.name}/>
        <Card.Content>
          <Paragraph>{item.desc}</Paragraph>
          <Paragraph>{item.year}</Paragraph>
        </Card.Content>
        <Card.Cover source={{ uri: item.image }} />
        <Card.Actions>
          <Button>{item.price}</Button>
          <Button onPress={() => quickDial(item.phone)}>Call Seller</Button>
        </Card.Actions>
      </Card>;
    }

    return (
        <View>
            <FlatList data={items} keyExtractor={(item)=>item.phone} renderItem={({item})=>render(item)}></FlatList>
        </View>
    )
}

const styles = StyleSheet.create({
    card:{
        margin:10,
        elevation:3,
    },
})

export default ListItemScreen
